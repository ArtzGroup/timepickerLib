/* JTSage-DateBox-5.3.3 (noframe) | Modes:datebox | 2020-09-21T19:55:04.051Z | (c)2010,2020 JTSage | https://github.com/jtsage/jtsage-datebox/blob/master/LICENSE.txt */

!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(l){if(void 0!==l.widget)return!1;var i=0,s=Array.prototype.slice;l.widget=function(e,i,t){var a,n,o,s={},r=e.split(".")[0],d=r+"-"+(e=e.split(".")[1]);return t||(t=i,i=l.Widget),l.isArray(t)&&(t=l.extend.apply(null,[{}].concat(t))),l.expr[":"][d.toLowerCase()]=function(e){return!!l.data(e,d)},l[r]=l[r]||{},a=l[r][e],n=l[r][e]=function(e,t){if(!this._createWidget)return new n(e,t);arguments.length&&this._createWidget(e,t)},l.extend(n,a,{version:t.version,_proto:l.extend({},t),_childConstructors:[]}),(o=new i).options=l.widget.extend({},o.options),l.each(t,function(t,a){function n(){return i.prototype[t].apply(this,arguments)}function o(e){return i.prototype[t].apply(this,e)}s[t]="function"==typeof a?function(){var e,t=this._super,i=this._superApply;return this._super=n,this._superApply=o,e=a.apply(this,arguments),this._super=t,this._superApply=i,e}:a}),n.prototype=l.widget.extend(o,{widgetEventPrefix:a&&o.widgetEventPrefix||e},s,{constructor:n,namespace:r,widgetName:e,widgetFullName:d}),a?(l.each(a._childConstructors,function(e,t){var i=t.prototype;l.widget(i.namespace+"."+i.widgetName,n,t._proto)}),delete a._childConstructors):i._childConstructors.push(n),l.widget.bridge(e,n),n},l.widget.extend=function(e){for(var t,i,a=s.call(arguments,1),n=0,o=a.length;n<o;n++)for(t in a[n])i=a[n][t],a[n].hasOwnProperty(t)&&void 0!==i&&(l.isPlainObject(i)?e[t]=l.isPlainObject(e[t])?l.widget.extend({},e[t],i):l.widget.extend({},i):e[t]=i);return e},l.widget.bridge=function(e,t){var o=t.prototype.widgetFullName||e;l.fn[e]=function(i){var e="string"==typeof i,a=s.call(arguments,1),n=this;return e?this.length||"instance"!==i?this.each(function(){var e,t=l.data(this,o);return"instance"===i?(n=t,!1):!!t&&("function"==typeof t[i]&&"_"!==i.charAt(0)&&((e=t[i].apply(t,a))!==t&&void 0!==e?(n=e&&e.jquery?n.pushStack(e.get()):e,!1):void 0))}):n=void 0:(a.length&&(i=l.widget.extend.apply(null,[i].concat(a))),this.each(function(){var e=l.data(this,o);e?(e.option(i||{}),e._init&&e._init()):l.data(this,o,new t(i,this))})),n}},l.Widget=function(){},l.Widget._childConstructors=[],l.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(e,t){t=l(t||this.defaultElement||this)[0],this.element=l(t),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=l(),this.hoverable=l(),this.focusable=l(),this.classesElementLookup={},t!==this&&(l.data(t,this.widgetFullName,this),this.document=l(t.style?t.ownerDocument:t.document||t),this.window=l(this.document[0].defaultView||this.document[0].parentWindow)),this.options=l.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:l.noop,_create:l.noop,_init:l.noop,destroy:function(){this._destroy(),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:l.noop,widget:function(){return this.element},option:function(e,t){var i,a,n,o=e;if(0===arguments.length)return l.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(i=e.split(".")).shift(),i.length){for(a=o[e]=l.widget.extend({},this.options[e]),n=0;n<i.length-1;n++)a[i[n]]=a[i[n]]||{},a=a[i[n]];if(e=i.pop(),1===arguments.length)return void 0===a[e]?null:a[e];a[e]=t}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=t}return this._setOptions(o),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_trigger:function(e,t,i){var a,n,o=this.options[e];if(i=i||{},(t=l.Event(t)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],n=t.originalEvent)for(a in n)a in t||(t[a]=n[a]);return this.element.trigger(t,i),!("function"==typeof o&&!1===o.apply(this.element[0],[t].concat(i))||t.isDefaultPrevented())}};l.widget}),function(l){l.widget("jtsage.datebox",{initSelector:"input[data-role='datebox']",options:{mode:!1,hideInput:!1,lockInput:!0,safeEdit:!0,controlWidth:"290px",controlWidthImp:"",breakpointWidth:"567px",zindex:"1100",clickEvent:"click",disableWheel:!1,useKinetic:!0,flipSizeOverride:!1,defaultValue:!1,showInitialValue:!1,linkedField:!1,linkedFieldFormat:"%J",displayMode:"dropdown",displayDropdownPosition:"bottomRight",displayInlinePosition:"center",displayForcePosition:!1,dismissOutsideClick:!0,dismissOnEscape:!1,useHeader:!0,useImmediate:!1,useButton:!0,buttonIcon:!1,useFocus:!1,useSetButton:!0,useCancelButton:!1,useTodayButton:!1,closeTodayButton:!1,useTomorrowButton:!1,closeTomorrowButton:!1,useClearButton:!1,useCollapsedBut:!1,usePlaceholder:!1,headerFollowsPlaceholder:!0,headerFollowsTitle:!0,headerFollowsLabel:!0,beforeOpenCallback:!1,beforeOpenCallbackArgs:[],openCallback:!1,openCallbackArgs:[],closeCallback:!1,closeCallbackArgs:[],runOnBlurCallback:!1,startOffsetYears:!1,startOffsetMonths:!1,startOffsetDays:!1,afterToday:!1,beforeToday:!1,notToday:!1,maxDate:!1,minDate:!1,maxDays:!1,minDays:!1,maxYear:!1,minYear:!1,blackDates:!1,blackDatesRec:!1,blackDatesPeriod:!1,blackDays:!1,whiteDates:!1,enableDates:!1,validHours:!1,minHour:!1,maxHour:!1,minTime:!1,maxTime:!1,maxDur:!1,minDur:!1,minuteStep:1,minuteStepRound:0,twoDigitYearCutoff:38,flipboxLensAdjust:9,rolloverMode:{m:!0,d:!0,h:!0,i:!0,s:!0},useLang:"default",lang:{default:{setDateButtonLabel:"Set Date",setTimeButtonLabel:"Set Time",setDurationButtonLabel:"Set Duration",todayButtonLabel:"Jump to Today",tomorrowButtonLabel:"Jump to Tomorrow",titleDateDialogLabel:"Set Date",titleTimeDialogLabel:"Set Time",daysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysOfWeekShort:["Su","Mo","Tu","We","Th","Fr","Sa"],monthsOfYear:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsOfYearShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],durationLabel:["Days","Hours","Minutes","Seconds"],durationDays:["Day","Days"],timeFormat:24,headerFormat:"%A, %B %-d, %Y",tooltip:"Open Date Picker",nextMonth:"Next Month",prevMonth:"Previous Month",dateFieldOrder:["m","d","y"],timeFieldOrder:["h","i","a"],datetimeFieldOrder:["y","m","d","h","i","s","a"],slideFieldOrder:["y","m","d"],dateFormat:"%Y-%m-%d",datetimeFormat:"%Y-%m-%dT%k:%M:%S",useArabicIndic:!1,isRTL:!1,calStartDay:0,clearButton:"Clear",cancelButton:"Cancel",durationOrder:["d","h","i","s"],meridiem:["AM","PM"],timeOutput:"%k:%M",durationFormat:"%Dd %DA, %Dl:%DM:%DS",calDateListLabel:"Other Dates",calHeaderFormat:"%B %Y"}},theme_clearBtn:["clear",""],theme_closeBtn:["check",""],theme_cancelBtn:["cancel",""],theme_tomorrowBtn:["goto",""],theme_todayBtn:["goto",""],theme_dropdownContainer:"",theme_modalContainer:"",theme_inlineContainer:"",theme_headerTheme:"",theme_headerBtn:["cancel",""],theme_openButton:"",theme_cal_Today:"",theme_cal_DayHigh:"",theme_cal_Selected:"",theme_cal_DateHigh:"",theme_cal_DateHighAlt:"",theme_cal_DateHighRec:"",theme_cal_Default:"",theme_cal_OutOfBounds:"",theme_cal_NextBtn:["next",""],theme_cal_PrevBtn:["prev",""],theme_cal_Pickers:"",theme_cal_DateList:"",theme_dbox_NextBtn:["plus",""],theme_dbox_PrevBtn:["minus",""],theme_dbox_Inputs:"",theme_fbox_Selected:"",theme_fbox_Default:"",theme_fbox_Forbidden:"",theme_fbox_RollHeight:"135px",theme_slide_Today:"",theme_slide_DayHigh:"",theme_slide_Selected:"",theme_slide_DateHigh:"",theme_slide_DateHighAlt:"",theme_slide_DateHighRec:"",theme_slide_Default:"",theme_slide_NextBtn:["plus",""],theme_slide_PrevBtn:["minus",""],theme_slide_NextDateBtn:["next",""],theme_slide_PrevDateBtn:["prev",""],theme_slide_Pickers:"",theme_slide_DateList:"",theme_backgroundMask:{position:"fixed",left:0,top:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,.4)"},theme_headStyle:"",theme_spanStyle:!1,buttonIconDate:"calendar",buttonIconTime:"clock",disabledState:"disabled",tranDone:"webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",durationStep:1,durationSteppers:{d:1,h:1,i:1,s:1}},icons:{getIcon:function(e){var t=this,i=t.options.iconFactory;return!1!==e&&("function"==typeof i?i.call(t,e):"<svg"===e.substr(0,4)?e:void 0!==t.icons[e]?t.icons[e]:t.icons.cancel)},next:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M9.8 6L4 11.8l-1.8-1.7L6.6 6 2.2 2 4 .1 9.8 6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',prev:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M2.2 6L8 .2l1.8 1.7L5.4 6l4.4 4L8 11.9 2.2 6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',plus:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0 5v2h12V5H0z" fill="currentColor"/><path fill-rule="evenodd" clip-rule="evenodd" d="M7 0H5v12h2V0z" fill="currentColor"/></svg>',minus:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M0 5v2h12V5H0z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',check:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M12 2.8l-8 8-4-4 1.5-1.5L4 7.8l6.5-6.5L12 2.6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',cancel:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M11 2.5L9.4 1 1.1 9.5 2.5 11l8.4-8.4z" clip-rule="evenodd" fill-rule="evenodd"/><path fill="currentColor" d="M2.5 1L1 2.6l8.4 8.4L11 9.5 2.5 1.1z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',goto:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M7 3.3C3.8 3.6.4 5.9.4 11.7c2-4.3 4-5 6.8-5v2.9l4.6-4.7L7.1.3v3z" fill-rule="evenodd"/></svg>',clear:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.8 1H8.1c0-.5-.4-1-.8-1H4.7C4.3 0 4 .6 4 1H2.2c-.4 0-.8.3-.8.8v.8c0 .5.4.8.8.8V11c0 .5.4.9.9.9H9c.4 0 .8-.4.8-.9V3.4c.5 0 .8-.3.8-.8v-.8c0-.5-.3-.9-.8-.9zM9 11H3V3.6H4v6.7h.8V3.5h.9v6.7h.8V3.5h.9v6.7H8V3.5h.8V11zm.8-8.4H2.2v-.8h7.6v.8z" fill="currentColor"/></svg>',clock:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M6.8 6h2.5v1.7H5.9a.8.8 0 0 1-.8-.8V2.6h1.7V6zM6 1.2a4.8 4.8 0 1 1 0 9.6 4.8 4.8 0 0 1 0-9.6zM6 .1a6 6 0 0 0-6 6 6 6 0 0 0 6 6 6 6 0 0 0 6-6 6 6 0 0 0-6-6z" clip-rule="evenodd" fill-rule="evenodd"/></svg>',calendar:'<svg width="12" height="12" xmlns="http://www.w3.org/2000/svg"><path fill="currentColor" d="M10.5 1h-.8v1.3c0 .2-.2.4-.4.4H7.6a.4.4 0 0 1-.4-.4V1H4.7v1.3c0 .2-.2.4-.4.4H2.6a.4.4 0 0 1-.4-.4V1h-.8c-.5 0-.8.4-.8.8V11c0 .5.4.8.8.8h9.3c.5 0 .8-.4.8-.8V1.8c0-.5-.4-.8-.8-.8zm0 10.1H1.2V3.5h9.3v7.6zM3.7 1.9h-.8V.2h.8v1.7zm5.1 0H8V.2h.8v1.7zM4.5 5.3h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zM2.8 7H2v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zm1.7 0h-.8v-.8h.8V7zM2.8 8.7H2v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm-6.8 1.7H2v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8zm1.7 0h-.8v-.8h.8v.8z"/></svg>'},styleFunctions:{},_getLongOptions:function(e){var t,i,a={};for(t in e.data())"datebox"===t.substr(0,7)&&7<t.length&&"options"!==(i=(i=t.substr(7)).charAt(0).toLowerCase()+i.slice(1))&&(a[i]=e.data(t));return a},_setOption:function(){l.Widget.prototype._setOption.apply(this,arguments),this.refresh()},getOption:function(e){var t=this.__(e);return"Err:NotFound"!==t?t:this.options[e]},_enhanceDate:function(){Object.assign(this._date.prototype,{copy:function(e,t){return e=Object.assign([0,0,0,0,0,0,0],e),t=Object.assign([0,0,0,0,0,0,0],t),new Date(0<t[0]?t[0]:this.get(0)+e[0],0<t[1]?t[1]:this.get(1)+e[1],0<t[2]?t[2]:this.get(2)+e[2],0<t[3]?t[3]:this.get(3)+e[3],0<t[4]?t[4]:this.get(4)+e[4],0<t[5]?t[5]:this.get(5)+e[5],0<t[6]?t[5]:this.get(6)+e[6])},adj:function(e,t){if("number"!=typeof t||"number"!=typeof e)throw new Error("Invalid Arguments");switch(e){case 0:this.setD(0,this.get(0)+t);break;case 1:this.setD(1,this.get(1)+t);break;case 2:this.setD(2,this.get(2)+t);break;case 3:t*=60;case 4:t*=60;case 5:t*=1e3;case 6:this.setTime(this.getTime()+t)}return this},setD:function(e,t){switch(e){case 0:this.setFullYear(t);break;case 1:this.setMonth(t);break;case 2:this.setDate(t);break;case 3:this.setHours(t);break;case 4:this.setMinutes(t);break;case 5:this.setSeconds(t);break;case 6:this.setMilliseconds(t)}return this},get:function(e){switch(e){case 0:return this.getFullYear();case 1:return this.getMonth();case 2:return this.getDate();case 3:return this.getHours();case 4:return this.getMinutes();case 5:return this.getSeconds();case 6:return this.getMilliseconds()}return!1},get12hr:function(){return 0===this.get(3)?12:this.get(3)<13?this.get(3):this.get(3)-12},iso:function(){var e=[0,0,0],t=0;for(t=0;t<3;t++)e[t]=this.get(t),1===t&&e[t]++,e[t]<10&&(e[t]="0"+String(e[t]));return e.join("-")},comp:function(){return parseInt(this.iso().replace(/-/g,""),10)},getEpoch:function(){return Math.floor(this.getTime()/1e3)},getEpochDays:function(){return Math.floor(this.getTime()/864e5)},getArray:function(){var e=[0,0,0,0,0,0],t=0;for(t=0;t<6;t++)e[t]=this.get(t);return e},setFirstDay:function(e){return this.setD(2,1).adj(2,e-this.getDay()),10<this.get(2)&&this.adj(2,7),this},setDWeek:function(e,t){return 4===e?this.setD(1,0).setD(2,1).setFirstDay(4).adj(2,-3).adj(2,7*(t-1)):this.setD(1,0).setD(2,1).setFirstDay(e).adj(2,7*(t-1))},getDWeek:function(e){var t,i;switch(e){case 0:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(0),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 1:return t=this.copy([0,-1*this.getMonth()]).setFirstDay(1),Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1;case 4:return 11===this.getMonth()&&28<this.getDate()?1:(t=this.copy([0,-1*this.getMonth()],!0).setFirstDay(4).adj(2,-3),(i=Math.floor((this.getTime()-(t.getTime()+6e4*(this.getTimezoneOffset()-t.getTimezoneOffset())))/6048e5)+1)<1?(t=this.copy([-1,-1*this.getMonth()]).setFirstDay(4).adj(2,-3),Math.floor((this.getTime()-t.getTime())/6048e5)+1):i);default:return 0}}})},_ord:{default:function(e){var t=e%10;return 9<e&&e<21||3<t?"th":["th","st","nd","rd"][t]}},_customformat:{default:function(e,t,i){return!1}},_formatter:function(e,a,t){var n,o=this,s=this.options,r=0;return void 0===t&&(t=!0),"dura"===s.mode.substr(0,4)&&(r=o._dur(this.theDate.getTime()-this.initDate.getTime()),e.match(/%Dd/)||(r[1]+=24*r[0]),e.match(/%Dl/)||(r[2]+=60*r[1]),e.match(/%DM/)||(r[3]+=60*r[2])),e=e.replace(/%(D|X|0|-)*([1-9a-zA-Z])/g,function(e,t,i){if("X"===t)return"function"==typeof o._customformat[s.mode]?o._customformat[s.mode](i,a,s):e;if("D"===t)switch(i){case"d":return r[0];case"l":return o._zPad(r[1]);case"M":return o._zPad(r[2]);case"S":return o._zPad(r[3]);case"A":return o.__("durationDays")[1===r[0]?0:1];default:return e}switch(i){case"a":return o.__("daysOfWeekShort")[a.getDay()];case"A":return o.__("daysOfWeek")[a.getDay()];case"b":return o.__("monthsOfYearShort")[a.getMonth()];case"B":return o.__("monthsOfYear")[a.getMonth()];case"C":return parseInt(a.getFullYear()/100);case"d":return o._zPad(a.getDate(),t);case"H":case"k":return o._zPad(a.getHours(),t);case"I":case"l":return o._zPad(a.get12hr(),t);case"m":return o._zPad(a.getMonth()+1,t);case"M":return o._zPad(a.getMinutes(),t);case"p":case"P":return n=o.__("meridiem")[a.get(3)<12?0:1].toUpperCase(),"P"===i?n.toLowerCase():n;case"s":return a.getEpoch();case"S":return o._zPad(a.getSeconds(),t);case"u":return o._zPad(a.getDay()+1,t);case"w":return a.getDay();case"y":return o._zPad(a.getFullYear()%100);case"Y":return a.getFullYear();case"E":return a.getFullYear()+543;case"V":return o._zPad(a.getDWeek(4),t);case"U":return o._zPad(a.getDWeek(0),t);case"W":return o._zPad(a.getDWeek(1),t);case"o":return"function"==typeof o._ord[s.useLang]?o._ord[s.useLang](a.getDate()):o._ord.default(a.getDate());case"j":return n=new o._date(a.getFullYear(),0,1),(n="000"+String(Math.ceil((a-n)/864e5)+1)).slice(-3);case"J":return a.toJSON();case"G":return n=a.getFullYear(),1===a.getDWeek(4)&&0<a.getMonth()?n+1:51<a.getDWeek(4)&&a.getMonth()<11?n-1:n;case"g":return n=a.getFullYear%100,1===a.getDWeek(4)&&0<a.getMonth()&&++n,51<a.getDWeek(4)&&a.getMonth()<11&&--n,o._zpad(n);default:return e}}),!0===o.__("useArabicIndic")&&!0===t&&(e=o._dRep(e)),e},_minStepFix:function(){var e=this.theDate.get(4),t=this.options.minuteStep,i=this.options.minStepRound,a=e%t;1<t&&0<a&&(i<0?e-=a:0<i?e+=t-a:e%t<t/2?e-=a:e+=t-a,this.theDate.setMinutes(e))},_newDateCheck:{enableDate:function(e){return-1<this.options.enableDates.indexOf(e.iso)},whiteDate:function(e){return!1!==this.options.whiteDates&&-1<this.options.whiteDates.indexOf(e.iso)},notToday:function(e){return!1!==this.options.notToday&&this.realToday.comp()===e.comp()},maxYear:function(e){var t=this.options.maxYear;return!1!==t&&e.get(0)>t},minYear:function(e){var t=this.options.minYear;return!1!==t&&e.get(0)<t},minDate:function(e){var t=this.options.minDate;return!1!==t&&e<(t=this.parseISO(t))},maxDate:function(e){var t=this.options.maxDate;return!1!==t&&((t=this.parseISO(t)).adj(2,1),t<e)},afterToday:function(e){return!1!==this.options.afterToday&&e<this.realToday},beforeToday:function(e){return!1!==this.options.beforeToday&&e>this.realToday},minmaxDays:function(e){var t,i,a=this.options.minDays,n=this.options.maxDays;return(!1!==a||!1!==n)&&(t=!1===a||this.realToday.getEpochDays()-(a+1)<e.getEpochDays(),i=!1===n||this.realToday.getEpochDays()+(n+1)>e.getEpochDays(),!(t&&i))},minHour:function(e){var t=this.options.minHour;return!1!==t&&e.get(3)<t},maxHour:function(e){var t=this.options.maxHour;return!1!==t&&e.get(3)>t},minTime:function(e){var t,i=this.options.minTime,a=e.get(3);return!1!==i&&(a<(t=this.options.minTime.split(":",2))[0]||!(a>t[0])&&e.get(4)<t[1])},maxTime:function(e){var t,i=this.options.maxTime,a=e.get(3);return!1!==i&&(!(a<(t=this.options.maxTime.split(":",2))[0])&&(a>t[0]||e.get(4)>t[1]))},validHours:function(e){return-1<this.options.validHours.indexOf(e.get(3))},blackDays:function(e){var t=this.options.blackDays;return!1!==t&&-1<t.indexOf(e.getDay())},blackDates:function(e){var t=this.options.blackDates;return!1!==t&&-1<t.indexOf(e.iso())},blackDatesRec:function(e){var t,i=this.options.blackDatesRec;if(!1===i)return!1;for(t=0;t<i.length;t++)if(!(-1!==i[t][0]&&i[t][0]!==e.get(0)||-1!==i[t][1]&&i[t][1]!==e.get(1)||-1!==i[t][2]&&i[t][2]!==e.get(2)))return!0;return!1},blackDatesPeriod:function(e){var t,i,a=this.options.blackDatesPeriod;return!1!==a&&(t=a[0].split("-"),i=new Date(t[0],t[1]-1,t[2],12,1,1,1),Math.round((e.getTime()-i.getTime())/864e5)%a[1]==0)}},_newDateChecker:function(e){var t,i=this,a=!1,n={good:!0,bad:!1,failrule:!1,passrule:!1,dateObj:e.copy()},o=["blackDays","blackDates","blackDatesRec","blackDatesPeriod","notToday","maxYear","minYear","afterToday","beforeToday","maxDate","minDate","minmaxDays","minHour","maxHour","minTime","maxTime"];if(i.realToday=new i._date,!1!==this.options.enableDates)return i._newDateCheck.whiteDate.call(i,e)?n.passrule="enableDates":(n.bad=!0,n.good=!1,n.failrule="enableDates"),n;if(!1!==this.options.validHours)return i._newDateCheck.validHours.call(i,e)?n.passrule="validHours":(n.bad=!0,n.good=!1,n.failrule="validHours"),n;if(i._newDateCheck.whiteDate.call(i,e))return n.passrule="whiteDates",n;for(t=0;t<o.length&&!a;t++)i._newDateCheck[o[t]].call(i,e)&&(n.bad=!0,n.good=!1,n.failrule=o[t],a=!0);return n},_getCleanDur:function(){var e=this,t=this.options,i=e.theDate.getEpoch()-e.initDate.getEpoch();return i<0&&(i=0,e.theDate=e.initDate.copy()),!1!==t.minDur&&i<t.minDur&&(e.theDate=new e._date(e.initDate.getTime()+1e3*t.minDur),i=t.minDur),!1!==t.maxDur&&i>t.maxDur&&(e.theDate=new e._date(e.initDate.getTime()+1e3*t.maxDur),i=t.maxDur),e.lastDuration=i,e.lastDurationA=e._dur(1e3*i),[i,e._dur(1e3*i)]},_check:function(){var e=this._newDateChecker(this.theDate);return this.dateOK=!0===e.good,e.good},_fixstepper:function(e){var t=this.options.durationSteppers,i=this.options.durationStep;-1<e.indexOf("d")&&(t.d=i),-1<e.indexOf("h")&&(t.d=1,t.h=i),-1<e.indexOf("i")&&(t.h=1,t.i=i),-1<e.indexOf("s")&&(t.i=1,t.s=i)},_ThemeDateCK:{selected:function(e){return!1!==this.options.slideHighPick&&(void 0!==this.originalDate&&this.originalDate.iso()===e.iso())},today:function(e){return!1!==this.options.slideHighToday&&this.realToday.iso()===e.iso()},highDates:function(e){var t=this.options.highDates;return!1!==t&&-1<t.indexOf(e.iso())},highDatesAlt:function(e){var t=this.options.highDatesAlt;return!1!==t&&-1<t.indexOf(e.iso())},highDatesRec:function(e){var t,i=this.options.highDatesRec;if(!1===i)return!1;for(t=0;t<i.length;t++)if(!(-1!==i[t][0]&&i[t][0]!==e.get(0)||-1!==i[t][1]&&i[t][1]!==e.get(1)||-1!==i[t][2]&&i[t][2]!==e.get(2)))return!0;return!1},highDatesPeriod:function(e){var t,i,a=this.options.highDatesPeriod;return!1!==a&&(t=a[0].split("-"),i=new Date(t[0],t[1]-1,t[2],12,1,1,1),Math.round((e.getTime()-i.getTime())/864e5)%a[1]==0)},highDays:function(e){var t=this.options.highDays;return!1!==t&&-1<t.indexOf(e.getDay())}},_parser:{default:function(e){return e}},_makeDate:function(e,t){var i,a,n,o,s=this,r=this.options,d=this.options.defaultValue,l=s.__fmt(),h=null,c=[],u=!1,p=new s._date,f={year:-1,mont:-1,date:-1,hour:-1,mins:-1,secs:-1,week:!1,wtyp:4,wday:!1,yday:!1,meri:0};if(void 0===t&&(t=!1),e=void 0===e?"":(!0===s.__("useArabicIndic")?s._dRep(e,-1):e).trim(),void 0===r.mode)return p;if(void 0!==s._parser[r.mode])return s._parser[r.mode].call(s,e);if("durationbox"===r.mode||"durationflipbox"===r.mode){if(l=l.replace(/%D([a-z])/gi,function(e,t){switch(t){case"d":case"l":case"M":case"S":return"("+e+"|[0-9]+)";default:return".+?"}}),h=(l=new RegExp("^"+l+"$")).exec(e),n=l.exec(s.__fmt()),null===h||h.length!==n.length)return"number"==typeof d&&0<d?new s._date(1e3*(s.initDate.getEpoch()+parseInt(d,10))):new s._date(s.initDate.getTime());for(a=s.initDate.getEpoch(),i=1;i<h.length;i++)o=parseInt(h[i],10),n[i].match(/^%Dd$/i)&&(a+=86400*o),n[i].match(/^%Dl$/i)&&(a+=3600*o),n[i].match(/^%DM$/i)&&(a+=60*o),n[i].match(/^%DS$/i)&&(a+=o);return new s._date(1e3*a)}if("%J"===l)return p=new s._date(e),isNaN(p.getDate())&&(p=new s._date),p;if(l=l.replace(/%(0|-)*([a-z])/gi,function(e,t,i){switch(c.push(i),i){case"p":case"P":case"b":case"B":return"("+e+"|.+?)";case"H":case"k":case"I":case"l":case"m":case"M":case"S":case"V":case"U":case"u":case"W":case"d":return"("+e+"|[0-9]{"+("-"===t?"1,":"")+"2})";case"j":return"("+e+"|[0-9]{3})";case"s":return"("+e+"|[0-9]+)";case"g":case"y":return"("+e+"|[0-9]{2})";case"E":case"G":case"Y":return"("+e+"|[0-9]{1,4})";default:return c.pop(),".+?"}}),h=(l=new RegExp("^"+l+"$")).exec(e),n=l.exec(s.__fmt()),null===h||h.length!==n.length){if(""!==e&&(u=!0),!1!==d&&""!==d)switch(typeof d){case"object":"function"==typeof d.getDay?p=d:3===d.length&&(p=s._pa(d,"time"===r.mode.substr(0,4)&&p));break;case"number":p=new s._date(1e3*d);break;case"string":p="+"===d.substr(0,1)?(new s._date).adj(5,parseInt(d.substr(1),10)):"-"===d.substr(0,1)?(new s._date).adj(5,-1*parseInt(d.substr(1),10)):"time"===r.mode.substr(0,4)?(a=Object.assign([0,0,0],d.split(":",3)),s._pa(a,p)):((a=Object.assign([0,0,0],d.split("-",3)))[1]--,s._pa(a,!1))}isNaN(p.getDate())&&(p=new s._date)}else{for(i=1;i<h.length;i++)switch(o=parseInt(h[i],10),c[i-1]){case"s":return new s._date(1e3*parseInt(h[i],10));case"Y":case"G":f.year=o;break;case"E":f.year=o-543;break;case"y":case"g":r.afterToday||o<r.twoDigitYearCutoff?f.year=2e3+o:f.year=1900+o;break;case"m":f.mont=o-1;break;case"d":f.date=o;break;case"H":case"k":case"I":case"l":f.hour=o;break;case"M":f.mins=o;break;case"S":f.secs=o;break;case"u":f.wday=o-1;break;case"w":f.wday=o;break;case"j":f.yday=o;break;case"V":f.week=o,f.wtyp=4;break;case"U":f.week=o,f.wtyp=0;break;case"W":f.week=o,f.wtyp=1;break;case"p":case"P":o=new RegExp("^"+h[i]+"$","i"),f.meri=o.test(s.__("meridiem")[0])?-1:1;break;case"b":-1<(a=s.__("monthsOfYearShort").indexOf(h[i]))&&(f.mont=a);break;case"B":-1<(a=s.__("monthsOfYear").indexOf(h[i]))&&(f.mont=a)}if(0!==f.meri&&(-1===f.meri&&12===f.hour&&(f.hour=0),1===f.meri&&12!==f.hour&&(f.hour=f.hour+12)),p=new s._date(s._n(f.year,0),s._n(f.mont,0),s._n(f.date,1),s._n(f.hour,0),s._n(f.mins,0),s._n(f.secs,0),0),f.year<100&&-1!==f.year&&p.setFullYear(f.year),-1<f.mont&&-1<f.date||-1<f.hour&&-1<f.mins&&-1<f.secs)return!0===t?[p,u]:p;!1!==f.week&&(p.setDWeek(f.wtyp,f.week),-1<f.date&&p.setDate(f.date)),!1!==f.yday&&p.setD(1,0).setD(2,1).adj(2,f.yday-1),!1!==f.wday&&p.adj(2,f.wday-p.getDay())}return!0===t?[p,u]:p},_event:function(e,t){var i,a,n=l(this).data("jtsage-datebox"),o=l(this).data("jtsage-datebox").options;if(!e.isPropagationStopped())switch(t.method){case"close":void 0===t.closeCancel&&(t.closeCancel=!1),n.cancelClose=t.closeCancel,n.close();break;case"open":n.open();break;case"set":if("object"==typeof t.value)n.theDate=t.value,n._t({method:"doset"});else{if("inline"!==o.displayMode&&"blind"!==o.displayMode||(n.originalDate=n.theDate),l(this).val(t.value),!1!==o.linkedField)if("string"==typeof o.linkedField)l(o.linkedField).val(n.callFormat(o.linkedFieldFormat,n.theDate,!1));else for(a=0;a<o.linkedField.length;a++)l(o.linkedField[a].id).val(n.callFormat(o.linkedField[a].format,n.theDate,!1));n.skipChange=!0,l(this).trigger("change")}break;case"doset":"function"==typeof n[i="_"+n.options.mode+"DoSet"]?n[i].call(n):n._t({method:"set",value:n._formatter(n.__fmt(),n.theDate),date:n.theDate});break;case"dooffset":t.type&&n._offset(t.type,t.amount,!0);break;case"dorefresh":n.refresh();break;case"doclear":l(this).val("").trigger("change");break;case"clear":l(this).trigger("change")}},_build:{default:function(){!(this.d.headerText="Error")!==this.d.intHTML&&this.d.intHTML.remove().empty(),this.d.intHTML=l("<div style='width:100%'><h2 style='text-align:center;color:red;'>Unknown Mode</h2></div>")},timebox:function(){this._build.datebox.call(this)},datetimebox:function(){this._build.datebox.call(this)},durationbox:function(){this._build.datebox.apply(this,[])},datebox:function(){var e,t,i,a,n=this,o=this.options,s=n.style_dboxCtr(),r="durationbox"===o.mode,d=["d","h","i","s"];for("boolean"!=typeof n.d.intHTML&&n.d.intHTML.empty().remove(),n.d.headerText=n._grabLabel("datebox"===o.mode||"datetimebox"===o.mode?n.__("titleDateDialogLabel"):n.__("titleTimeDialogLabel")),n.d.intHTML=l("<span>"),n.d.intHTML.addClass(o.theme_spanStyle),n.fldOrder=n._getFldOrder(o.mode),r?(n.dateOK=!0,n._fixstepper(n.fldOrder)):(n._check(),n._minStepFix()),"datebox"!==o.mode&&"datetimebox"!==o.mode||n.style_subHead(n._formatter(n.__("headerFormat"),n.theDate)).appendTo(n.d.intHTML),a=n.style_dboxRow(),t=0;t<n.fldOrder.length;t++)"a"===n.fldOrder[t]&&12!==n.__("timeFormat")||(e=r?o.durationSteppers[n.fldOrder[t]]:"i"===n.fldOrder[t]?o.minuteStep:1,(i=n.style_dboxCtrl(o.theme_dbox_PrevBtn,o.theme_dbox_NextBtn,n.fldOrder[t],r?n.__("durationLabel")[d.indexOf(n.fldOrder[t])]:null,o.theme_dbox_Inputs)).find("input").data({field:n.fldOrder[t],amount:e}),i.find(".dbBoxNext").data({field:n.fldOrder[t],amount:e}),i.find(".dbBoxPrev").data({field:n.fldOrder[t],amount:-1*e}),a.append(i));!0===n.__("isRTL")&&a.children().each(function(e,t){a.prepend(t)}),s.append(a),s.appendTo(n.d.intHTML),n._dbox_run_update(!0),n.d.intHTML.append(n._doBottomButtons.call(n,!0)),n.d.intHTML.on("change","input",function(){n._dbox_enter(l(this))}).on("keypress","input",function(e){13===e.which&&!0===n.dateOK&&(n._dbox_enter(l(this)),n._t({method:"set",value:n._formatter(n.__fmt(),n.theDate),date:n.theDate}),n._t({method:"close"}))}).on(n.wheelEvent,"input",function(e,t){e.preventDefault(),t=void 0===t?Math.sign(e.originalEvent.wheelDelta):t,n._offset(l(this).data("field"),(t<0?-1:1)*l(this).data("amount"))}).on(o.clickEvent,".dbBoxPrev, .dbBoxNext",function(e){n.d.intHTML.find(":focus").blur(),e.preventDefault(),n._offset(l(this).data("field"),l(this).data("amount"))})}},_drag:{default:function(){return!1}},_offset:function(e,t,i){var a,n,o,s,r=this,d=r.options,l=["y","m","d","h","i","s"].indexOf(e),h=32-r.theDate.copy([0],[0,0,32,13]).getDate(),c=[31,32-r.theDate.copy([0],[0,1,32,13]).getDate(),31,30,31,30,31,31,30,31,30,31],u="a"!==e&&("y"===e||void 0===d.rolloverMode[e]||!0===d.rolloverMode[e]);if(void 0===i&&(i=!0),"y"===e&&1===r.theDate.get(1)&&29===r.theDate.get(2)&&r.theDate.setD(2,28),"a"===e)t%2!=0&&(a=11<r.theDate.get(3)?-12:12,r.theDate.adj(3,a));else if(u)r.theDate.adj(l,t);else{switch(e){case"m":n=11,o=0,s=12;break;case"d":o=1,s=n=h;break;case"h":n=23,o=0,s=24;break;case"i":case"s":n=59,o=0,s=60}(a=r.theDate.get(l)+t)<o?a=a%s+s:n<a&&(a%=s),"m"===e&&r.theDate.get(2)>c[a]&&r.theDate.setD(2,c[a]),r.theDate.setD(l,a)}!0===i&&r.refresh(),d.useImmediate&&r._t({method:"doset"}),"calbox"===d.mode&&r._t({method:"displayChange",selectedDate:r.originalDate,shownDate:r.theDate,thisChange:e,thisChangeAmount:t,gridStart:r.getCalStartGrid(),gridEnd:r.getCalEndGrid(),selectedInGrid:r.isSelectedInCalGrid(),selectedInBounds:r.isSelectedInBounds()}),r._t({method:"offset",type:e,amount:t,newDate:r.theDate})},_startOffset:function(e){var t=this.options;return!1!==t.startOffsetYears&&e.adj(0,t.startOffsetYears),!1!==t.startOffsetMonths&&e.adj(1,t.startOffsetMonths),!1!==t.startOffsetDays&&e.adj(2,t.startOffsetDays),e},_posZero:function(e){return e<0?0:e},getModalPosition:function(){var e=this.options.displayForcePosition,t=this.d.mainWrap[0].getBoundingClientRect();return!1!==e?{position:"absolute",top:e[0],left:e[1]}:{position:"fixed",top:"50%",left:"50%","margin-left":t.width/2*-1,"margin-top":t.height/2*-1}},getDropPosition:function(e){var t,i=this,a=this.options,n=this.options.displayForcePosition,o=i.d.wrap[0].getBoundingClientRect(),s=i.d.mainWrap[0].getBoundingClientRect(),r=window.pageYOffset,d=window.pageXOffset,l=Math.max(document.documentElement.clientWidth,window.innerWidth||0)<=a.breakpointWidth.replace("px","");return void 0===(t={centerLeft:{top:i._posZero(r+o.top+o.height/2-s.height/2),left:i._posZero(d+o.left)},centerRight:{top:i._posZero(r+o.top+o.height/2-s.height/2),left:i._posZero(d+o.left+o.width-s.width)},centerMiddle:{top:i._posZero(r+o.top+o.height/2-s.height/2),left:i._posZero(d+o.left+o.width/2-s.width/2)},topLeft:{top:i._posZero(r+o.top-s.height-1),left:i._posZero(d+o.left)},topRight:{top:i._posZero(r+o.top-s.height-1),left:i._posZero(d+o.left+o.width-s.width)},topMiddle:{top:i._posZero(r+o.top-s.height-1),left:i._posZero(d+o.left+o.width/2-s.width/2)},bottomLeft:{top:i._posZero(r+o.top+o.height),left:i._posZero(d+o.left)},bottomRight:{top:i._posZero(r+o.top+o.height),left:i._posZero(d+o.left+o.width-s.width)},bottomMiddle:{top:i._posZero(r+o.top+o.height),left:i._posZero(d+o.left+o.width/2-s.width/2)}})[e]&&(e="bottomRight"),!1!==n?{position:"absolute",top:n[0],left:n[1]}:{position:"absolute",top:t[e].top,left:l?0:t[e].left}},getTheDate:function(){return this.theDate},getSelectedDate:function(){return this.originalDate},getLastDur:function(){return this.lastDuration},dateVisible:function(){return void 0===this.isSelectedInCalGrid||this.isSelectedInCalGrid()},setTheDate:function(e){this.theDate="object"==typeof e?e:this._makeDate(e),this.refresh(),this._t({method:"doset"})},parseDate:function(e,t){var i;return this.fmtOver=e,i=this._makeDate(t),this.fmtOver=!1,i},parseISO:function(e){return this.parseDate("%Y-%m-%d",e)},callFormat:function(e,t,i){return void 0===i&&(i=!1),this._formatter(e,t,i)},refresh:function(){var e=this,t=this.options;"function"!=typeof e._build[t.mode]?e._build.default.call(e):e._build[t.mode].call(e),!0===e.__("useArabicIndic")&&e._doIndic(),e.d.mainWrap.append(e.d.intHTML),e._t({method:"postrefresh"})},applyMinMax:function(e,t){var i,a=this.options,n=RegExp(/\d\d\d\d-\d\d-\d\d/);void 0===e&&(e=!0),void 0===t&&(t=!0),!0!==t&&!1!==a.minDate||(i=this.d.input.attr("min"),n.test(i)&&(a.minDate=i)),!0!==t&&!1!==a.maxDate||(i=this.d.input.attr("max"),n.test(i)&&(a.maxDate=i)),!0===e&&this._t({method:"refresh"})},_dur:function(e){return[Math.max(0,Math.floor(e/864e5)),Math.max(0,Math.floor(e/36e5%24)),Math.max(0,Math.floor(e/6e4%60)),Math.max(0,Math.floor(e/1e3%60))]},__:function(e){var t=this.options,i=t.lang[t.useLang],a=t[t.mode+"lang"],n="override"+e.charAt(0).toUpperCase()+e.slice(1);return void 0!==t[n]?t[n]:void 0!==i&&void 0!==i[e]?i[e]:void 0!==a&&void 0!==a[e]?a[e]:void 0!==t.lang.default[e]?t.lang.default[e]:"Err:NotFound"},__fmt:function(){var e=this,t=this.options;if(void 0!==e.fmtOver&&!1!==e.fmtOver)return e.fmtOver;switch(t.mode){case"timebox":case"timeflipbox":return e.__("timeOutput");case"durationbox":case"durationflipbox":return e.__("durationFormat");case"datetimebox":case"datetimeflipbox":return e.__("datetimeFormat");default:return e.__("dateFormat")}},_zPad:function(e,t){return void 0!==t&&"-"===t?String(e):(e<10?"0":"")+String(e)},_dRep:function(e,t){var i,a,n=48,o=57,s=1584,r="";for(-1===t&&(n+=s,o+=s,s=-1584),a=0;a<e.length;a++)r+=n<=(i=e.charCodeAt(a))&&i<=o?String.fromCharCode(i+s):String.fromCharCode(i);return r},_doIndic:function(){var e=this;e.d.intHTML.find("*").each(function(){l(this).children().length<1&&l(this).html(e._dRep(l(this).html()))}),e.d.intHTML.find("input").each(function(){l(this).val(e._dRep(l(this).val()))})},_n:function(e,t){return e<0?t:e},_pa:function(e,t){return"boolean"==typeof t?new this._date(e[0],e[1],e[2],0,0,0,0):new this._date(t.get(0),t.get(1),t.get(2),e[0],e[1],e[2],0)},_btwn:function(e,t,i){return t<e&&e<i},_grabLabel:function(e,t){var i,a,n=this.options,o=!1;return void 0===t&&(t=!1),void 0===n.overrideDialogLabel?(i=this.d.input.attr("placeholder"),a=this.d.input.attr("title"),void 0!==i&&(t||n.headerFollowsPlaceholder)?i:void 0!==a&&(t||n.headerFollowsTitle)?a:(o=l(document).find("label[for='"+this.d.input.attr("id")+"']").text(),t||n.headerFollowsLabel?""===o?e:o:e)):n.overrideDialogLabel},_getFldOrder:function(e){switch(e){case"durationbox":case"durationflipbox":return this.__("durationOrder");case"timebox":case"timeflipbox":return this.__("timeFieldOrder");case"datetimebox":case"datetimeflipbox":return this.__("datetimeFieldOrder");default:return this.__("dateFieldOrder")}},_t:function(e){this.d.input.trigger("datebox",e)},_prepFunc:function(e){return!1===e||"function"==typeof e?e:"function"==typeof window[e]&&window[e]},_pickRanges:function(e,t,i,a){var n,o=this.options,s=!1===a?i:t,r=0,d=0,l={month:[],year:[]};for(n=0;n<=11;n++)n===e?l.month.push([n,this.__("monthsOfYear")[n],!0]):l.month.push([n,this.__("monthsOfYear")[n],!1]);for(r=o.calYearPickMin<1?s+o.calYearPickMin:o.calYearPickMin<1800?s-o.calYearPickMin:"NOW"===o.calYearPickMin?i:o.calYearPickMin,d=o.calYearPickMax<1800?s+o.calYearPickMax:"NOW"===o.calYearPickMax?i:o.calYearPickMax,n=r;n<=d;n++)n===t?l.year.push([n,n,!0]):l.year.push([n,n,!1]);return l},_stdSel:function(e,t,i){var a,n="<select class='"+i+"' id='"+t+"'>";for(a=0;a<e.length;a++)n+="<option value='"+e[a][0]+"'"+(!0===e[a][2]?" selected='selected'":"")+">"+e[a][1]+"</option>";return n+="</select>"},_stdBtn:{cancel:function(){var t=this,e=this.options;return l(t.style_btn(e.theme_cancelBtn,t.__("cancelButton"))).on(e.clickEvent,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})})},clear:function(){var t=this,e=this.options;return l(t.style_btn(e.theme_clearBtn,t.__("clearButton"))).on(e.clickEvent,function(e){e.preventDefault(),t.d.input.val(""),t._t({method:"clear"}),t._t({method:"close",closeCancel:!0})})},close:function(e,t){var i=this,a=this.options;return void 0===t&&(t=!1),l(i.style_btn(a.theme_closeBtn,e)).addClass(!0===i.dateOK?"":"disabled").on(a.clickEvent,function(e){e.preventDefault(),!0===i.dateOK&&(!1===t?i._t({method:"set",value:i._formatter(i.__fmt(),i.theDate),date:i.theDate}):i._t(t),i._t({method:"close"}))})},today:function(){var t=this,i=this.options;return l(t.style_btn(i.theme_todayBtn,t.__("todayButtonLabel"))).on(i.clickEvent,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date),t._t({method:"dorefresh"}),!1!==i.closeTodayButton&&(t._t({method:"doset"}),t._t({method:"close"}))})},tomorrow:function(){var t=this,i=this.options;return l(t.style_btn(i.theme_tomorrowBtn,t.__("tomorrowButtonLabel"))).on(i.clickEvent,function(e){e.preventDefault(),t.theDate=t._pa([0,0,0],new t._date).adj(2,1),t._t({method:"dorefresh"}),!1!==i.closeTomorrowButton&&(t._t({method:"doset"}),t._t({method:"close"}))})}},_doBottomButtons:function(e){var t,i,a=this,n=this.options;if(!(n.useSetButton&&e||n.useTodayButton||n.useTomorrowButton||n.useClearButton||n.useCancelButton))return"";if(t=a.style_btnGrp(n.useCollapsedBut),n.useSetButton&&e){switch(n.mode){case"timebox":case"timeflipbox":i=a.__("setTimeButtonLabel");break;case"durationbox":case"duartionflipbox":i=a.__("setDurationButtonLabel");break;default:i=a.__("setDateButtonLabel")}a.setBut=a._stdBtn.close.call(a,i),a.setBut.appendTo(t)}return n.useTodayButton&&t.append(a._stdBtn.today.call(a)),n.useTomorrowButton&&t.append(a._stdBtn.tomorrow.call(a)),n.useClearButton&&t.append(a._stdBtn.clear.call(a)),n.useCancelButton&&t.append(a._stdBtn.cancel.call(a)),"function"==typeof a.style_btnGrpOut&&(t=a.style_btnGrpOut(n.useCollapsedBut,t)),t},close:function(){var e,t=this,i=this.options,a={};switch(i.closeCallback=t._prepFunc(i.closeCallback),!1!==i.closeCallback?a.afterclose=function(){i.closeCallback.apply(t,[{initDate:t.initDate,date:t.theDate,duration:t.lastDuration,cancelClose:t.cancelClose}].concat(i.closeCallbackArgs))}:a.afterclose=function(){return!0},i.displayMode){case"blind":t.d.mainWrap.slideUp();case"inline":return a.afterclose.call(),!0;default:l(".jtsage-datebox-backdrop-div").remove(),t.d.mainWrap.removeClass("db-show"),a.afterclose.call(),t.d.mainWrap.hide(),t.d.mainWrap.detach()}l(document).off(t.drag.eMove).off(t.drag.eEnd).off(t.drag.eEndA).off("resize"+t.eventNamespace).off("keydown"+t.eventNamespace),i.useFocus&&(t.fastReopen=!0,setTimeout((e=t,function(){e.fastReopen=!1}),300))},_create:function(){l(document).trigger("dateboxcreate");var e,t,i=this,a=Object.assign(this.options,this._getLongOptions(this.element),this.element.data("options")),n={input:this.element,wrap:this.element.parent(),mainWrap:l("<div class='dbContainer_"+this.uuid+"'>").css("zIndex",a.zindex),intHTML:!1},o="<style>.dbContainer_"+this.uuid+" { touch-action: none; width: "+a.controlWidth+a.controlWidthImp+"} @media (max-width: "+a.breakpointWidth+") { .dbContainer_"+this.uuid+" { width: 100% "+a.controlWidthImp+"} } "+(!1!==a.theme_headStyle?a.theme_headStyle:"")+"</style>",s=".datebox"+this.uuid,r={eStart:"touchstart"+s+" mousedown"+s,eMove:"touchmove"+s+" mousemove"+s,eEnd:"touchend"+s+" mouseup"+s,eEndA:["mouseup","touchend","touchcancel","touchmove"].join(s+" ")+s,move:!1,start:!1,end:!1,pos:!1,target:!1,delta:!1,tmp:!1};l("head").append(l(o)),i.d=n,i.drag=r,i.icons=this.icons,!1!==a.usePlaceholder&&i.d.input.attr("placeholder","string"==typeof a.usePlaceholder?a.usePlaceholder:i._grabLabel("",!0)),i.wheelEvent=a.disableWheel?"nonsenseEvent":void 0!==l.event.special.mousewheel?"mousewheel":"wheel",i.firstOfGrid=!1,i.lastOfGrid=!1,i.selectedInGrid=!1,i.skipChange=!1,i.cancelClose=!1,i.disabled=!1,i._date=window.Date,i._enhanceDate(),i.baseID=i.d.input.attr("id"),i.initDate=new i._date,i.initDate.setMilliseconds(0),i.theDate=a.defaultValue?i._makeDate():""!==i.d.input.val()?i._makeDate(i.d.input.val()):new i._date,""===i.d.input.val()&&i._startOffset(i.theDate),i.initDone=!1,a.showInitialValue&&i.d.input.val(i._formatter(i.__fmt(),i.theDate)),i.d.wrap=i.style_inWrap(i.d.input,a.theme_openButton),!1!==a.mode&&!1===a.buttonIcon&&(a.buttonIcon="time"===a.mode.substr(0,4)||"dur"===a.mode.substr(0,3)?a.buttonIconTime:a.buttonIconDate),a.useButton?(l(i.style_inBtn(a.buttonIcon,i.__("tooltip"),a.theme_openButton)).appendTo(i.d.wrap),i.d.wrap.on(a.clickEvent,".dbOpenButton",function(e){e.preventDefault(),a.useFocus?i.d.input.focus():i.disabled||i._t({method:"open"})})):i.style_inNoBtn(i.d.wrap),a.hideInput&&i.style_inHide(),a.runOnBlurCallback=i._prepFunc(a.runOnBlurCallback),i.d.input.on("focus.datebox",function(){!1===i.disabled&&a.useFocus&&i._t({method:"open"})}).on("change.datebox",function(){if(i.skipChange)return!(i.skipChange=!1);!1===a.runOnBlurCallback?!0===a.safeEdit?!1===(e=i._makeDate(i.d.input.val(),!0))[1]?i.theDate=e[0]:(i.theDate=i.originalDate,i._t({method:"doset"})):i.theDate=i._makeDate(i.d.input.val()):(e=i._makeDate(i.d.input.val(),!0),"object"!=typeof(t=a.runOnBlurCallback.call(i,{origDate:i.originalDate,input:i.d.input.val(),oldDate:i.theDate,newDate:e[0],isGood:!e[1],isBad:e[1]}))?i.theDate=e[0]:(i.theDate=t,i._t({method:"doset"}))),i.originalDate=i.theDate.copy(),i.refresh()}).on("datebox",i._event),a.lockInput&&i.d.input.attr("readonly","readonly"),i.d.input.is(":disabled")&&i.disable(),i.applyMinMax(!1,!1),"inline"!==a.displayMode&&"blind"!==a.displayMode||i.open(),l(document).trigger("dateboxaftercreate")},_destroy:function(){var e=this,t=this.options,i=e.d.wrap.find("dbOpenButton");!0===t.useButton&&(i.remove(),e.d.input.unwrap()),t.lockInput&&e.d.input.removeAttr("readonly"),e.d.input.off("datebox").off("focus.datebox").off("blur.datebox").off("change.datebox"),l(document).off(e.drag.eMove).off(e.drag.eStart).off(e.drag.eEnd).off(e.drag.eEndA).off("resize"+e.eventNamespace)},disable:function(){this.d.input.attr("disabled",!0),this.disabled=!0,this._t({method:"disable"})},enable:function(){this.d.input.attr("disabled",!1),this.disabled=!1,this._t({method:"enable"})},open:function(){var t=this,i=this.options,e=i.displayMode,a={};if(i.useFocus&&!0===t.fastReopen)return t.d.input.blur(),!1;if(t.theDate=t._makeDate(t.d.input.val()),t.originalDate=t.theDate.copy(),""===t.d.input.val()&&t._startOffset(t.theDate),t.d.input.blur(),"function"!=typeof t._build[i.mode]?t._build.default.call(t):t._build[i.mode].call(t),"function"==typeof t._drag[i.mode]&&t._drag[i.mode].call(t),t._t({method:"refresh"}),!0===t.__("useArabicIndic")&&t._doIndic(),t.d.intHTML.is(":visible"))return!1;if(t.d.mainWrap.empty(),i.useHeader&&t.d.mainWrap.append(l(t.style_mainHead(t.d.headerText,i.theme_headerTheme,i.theme_headerBtn))).find(".dbCloser").on(i.clickEvent,function(e){e.preventDefault(),t._t({method:"close",closeCancel:!0})}),t.d.mainWrap.append(t.d.intHTML).css("zIndex",i.zindex),t._t({method:"postrefresh"}),i.openCallback=t._prepFunc(i.openCallback),!1!==i.openCallback?a.afteropen=function(){t._t({method:"postrefresh"}),!1===i.openCallback.apply(t,[{initDate:t.initDate,date:t.theDate,duration:t.lastDuration}].concat(i.openCallbackArgs))&&t._t({method:"close"})}:a.afteropen=function(){t._t({method:"postrefresh"})},i.beforeOpenCallback=t._prepFunc(i.beforeOpenCallback),!1!==i.beforeOpenCallback&&!1===i.beforeOpenCallback.apply(t,[{initDate:t.initDate,date:t.theDate,duration:t.lastDuration}].concat(i.beforeOpenCallbackArgs)))return!1;switch(i.displayMode){case"inline":case"blind":t.initDone?"blind"===i.displayMode&&(t.refresh(),t.d.mainWrap.slideDown()):(t.d.mainWrap.insertAfter(t.style_attach(!0)).addClass(i.theme_inlineContainer).css({zIndex:"auto",marginRight:"right"===i.displayInlinePosition?0:"auto",marginLeft:"left"===i.displayInlinePosition?0:"auto"}),"blind"===i.displayMode&&t.d.mainWrap.hide(),t.initDone=!0),t._t({method:"postrefresh"});break;default:t.d.mainWrap.show().css("zIndex",i.zindex).appendTo(t.style_attach(!1)).addClass(i.theme_modalContainer).one(i.tranDone,function(){t.d.mainWrap.is(":visible")?a.afteropen.call():(a.afterclose.call(),t.d.mainWrap.removeClass("db-show"))}),t.d.backdrop=l("<div class='jtsage-datebox-backdrop-div'></div>").css(i.theme_backgroundMask).css("zIndex",i.zindex-1).appendTo("modal"===i.displayMode?t.style_attach(!1):"body").on(i.clickEvent,function(e){e.preventDefault(),i.dismissOutsideClick&&t._t({method:"close",closeCancel:!0})}),t.d.mainWrap.css("modal"===i.displayMode?t.getModalPosition.call(t):t.getDropPosition.call(this,i.displayDropdownPosition))}"modal"!==e&&"dropdown"!==e||(l(document).on("resize"+t.eventNamespace,function(){this.d.mainWarp.css("modal"===e?this.getModalPosition.call(this):this.getDropPosition.call(this,this.options.displayDropdownPosition))}.bind(t)),i.dismissOnEscape&&l(document).on("keydown"+t.eventNamespace,function(e){("key"in e?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&this._t({method:"close",closeCancel:!0})}.bind(t))),window.setTimeout(function(){t.d.mainWrap.addClass("db-show")},0),window.setTimeout(function(){t.d.mainWrap.trigger("oTransitionEnd")},200)},style_attach:function(e){var t=this.d.wrap.parent(),i=l("body").find("#"+this.baseID+"-dbAttach");return 1===i.length?i:e?t.hasClass("form-group")?t:this.d.wrap:l("body")},style_btn:function(e,t){var i;return t=void 0===t?"":t,i="<a href='#' role='button' class='"+e[1]+"'>",i+=!1!==e[0]?"<span style='top: 3px; display: inline-block; position: relative;'>"+this.icons.getIcon.call(this,e[0])+"</span> ":"",i+=t+"</a>"},style_btnGrp:function(e){return l("<div style='padding: 5px;' class=''>")},style_inWrap:function(e,t){return e.css({display:"inline"}),e.wrap("<div style='display:inline-block' class='"+t+"'>").parent()},style_inBtn:function(e,t){return"<div style='display:inline' class='dbOpenButton' title='"+t+"'><span>"+this.icons.getIcon.call(this,e)+"</span></div>"},style_inNoBtn:function(e){return!0},style_inHide:function(){var e=this.d.wrap.parent();e.hasClass("form-group")?e.hide():this.d.wrap.hide()},style_mainHead:function(e,t,i){return"<div class='"+t+"'>"+e+"<a href='#' class='dbCloser'><span>"+this.icons.getIcon.call(this,i[0])+"</span></a></div>"},style_subHead:function(e){return l("<div class='dbHeader'><h4>"+e+"</h4></div>")},style_pnHead:function(e,t,i,a,n){var o=l("<div>");return l(this.style_btn([t[0],t[1]+" "+a])).appendTo(o),l("<h4 style='display:inline'>"+e+"</h4>").appendTo(o),l(this.style_btn([i[0],i[1]+" "+n])).appendTo(o),o},style_picker:function(e,t,i,a){var n="";return n+="<div>",n+="<div style='padding:0; margin:0; display:inline;'>",n+=this._stdSel(e.month,i,t),n+="</div>",n+="<div style='padding:0; margin:0; display:inline;'>",n+=this._stdSel(e.year,a,t),n+="</div>",l(n+="</div>")},style_dateList:function(e,t,i,a){var n="",o=t.slice();return o.unshift([!1,e,!0]),n+="<div>",n+=this._stdSel(o,a,i),l(n+="</div>")},style_calGrid:function(){return l("<div><table class='dbCalGrid'></table></div>")},style_calRow:function(){return l("<tr>")},style_calBtn:function(e,t){var i=void 0!==t?" style='width: "+100/t+"%'":"",a=e.bad?"disabled='disabled'":"",n="class='dbEvent "+e.theme+(e.bad?" disabled":"")+"'";return l("<td "+i+"><a href='#' "+n+" "+a+">"+e.displayText+"</a></td>")},style_calTxt:function(e,t,i){return l("<td "+(void 0!==i?" style='width: "+100/i+"%'":"")+">"+e+"</td>")},style_dboxCtr:function(){return l("<table style='width:100%'>")},style_dboxRow:function(){return l("<tr>")},style_dboxCtrl:function(e,t,i,a){var n="";return n+="<td><div class='dbBox"+i+"'>",n+=this.style_btn([t[0],t[1]+" dbBoxNext"]),null!==a&&(n+="<div class='' style='height:auto'>"+a+"</div>"),n+="<input type='text' ",n+="class='' ",n+="style='width:100%'>",n+=this.style_btn([e[0],e[1]+" dbBoxPrev"]),l(n+="</div></td>")},style_slideGrid:function(){return l("<div><table style='width:100%' class='dbSlideGrid'></table></div>")},style_slideRow:function(){return l("<tr>")},style_slideBtn:function(e){var t=e.bad?"disabled='disabled'":"",i="class='dbEventS "+e.theme+(e.bad?" disabled":"")+"'";return l("<td  style='width: 12.5%'><a href='#' "+i+" "+t+"><small>"+this.__("daysOfWeekShort")[e.dateObj.getDay()]+"</small><br>"+e.dateObj.getDate()+"</a></td>")},style_slideCtrl:function(e,t){var i="class='"+t[1]+" "+e+"'";return l("<td style='width: 6.25%'><a href='#' "+i+">"+this.icons.getIcon.call(this,t[0])+"</a></td>")},style_fboxCtr:function(e){return l("<div style='height: "+e+"; overflow: hidden; padding: 5px;'>")},style_fboxDurLbls:function(){return l("<div style='padding: 0 5px;'>")},style_fboxDurLbl:function(e,t){return l("<div style='display: inline-block; width: "+100/t+"%'>"+e+"</div>")},style_fboxRollCtr:function(e){return l("<div style='float: left; width: "+100/e+"%'>")},style_fboxRollPrt:function(){return l("<ul>")},style_fboxRollCld:function(e,t){return l("<li class='"+t+"' style='padding: 10px 0;'>"+e+"</li>")},style_fboxLens:function(){return l("<div style='margin: 0px 2px; box-shadow: 0 .5rem 1rem rgba(0,0,0,.15); border: 1px solid black; height: 35px;'>")},style_fboxPos:function(){var e,t,i,a,n=this.options,o=this.d.intHTML.find(".dbRollerV").outerHeight(!0),s=this.d.intHTML.find(".dbRollerV").height(),r=this.d.intHTML.find(".dbLens").first(),d=r.outerHeight();if(s<1)return!0;a=-1*(o/2+d/2),r.css({top:a,marginBottom:-1*d}),this.d.intHTML.find(".dbRoller").each(function(){e=l(this),t=e.children().first(),i=e.outerHeight(!0),"0px"===t.css("marginTop")&&(a=i/2*-1+s/2,!1!==n.flipboxLensAdjust&&(a+=n.flipboxLensAdjust),t.css("margin-top",a))})},_dbox_run_update:function(e){var t=this,i=this.options,a="durationbox"===i.mode;a&&t._getCleanDur(),!0!==e&&!0!=a&&(t._check(),"datebox"!==i.mode&&"datetimebox"!==i.mode||t.d.intHTML.find(".dbHeader").childern().first().text(t._formatter(t.__("headerFormat"),t.theDate)),i.useSetButton&&(!1===t.dateOK?t.setBut.addClass(i.disabledState):t.setBut.removeClass(i.disabledState))),t.d.intHTML.find("input").each(function(){switch(l(this).data("field")){case"y":l(this).val(t.theDate.get(0));break;case"m":l(this).val(t.theDate.get(1)+1);break;case"d":l(this).val(a?t.lastDurationA[0]:t.theDate.get(2));break;case"h":a?l(this).val(t.lastDurationA[1]):12===t.__("timeFormat")?l(this).val(t.theDate.get12hr()):l(this).val(t.theDate.get(3));break;case"i":a?l(this).val(t.lastDurationA[2]):l(this).val(t._zPad(t.theDate.get(4)));break;case"M":l(this).val(t.__("monthsOfYearShort")[t.theDate.get(1)]);break;case"a":l(this).val(t.__("meridiem")[11<t.theDate.get(3)?1:0]);break;case"s":a?l(this).val(t.lastDurationA[3]):l(this).val(t._zPad(t.theDate.get(5)))}}),!0===t.__("useArabicIndic")&&t._doIndic()},_dbox_enter:function(e){var t,i=parseInt(e.val(),10),a=this,n=0;if("durationbox"===this.options.mode)a.d.intHTML.find("input").each(function(){switch(i=parseInt(l(this).val(),10),l(this).data("field")){case"d":n+=86400*i;break;case"h":n+=3600*i;break;case"i":n+=60*i;break;case"s":n+=i}}),a.theDate.setTime(a.initDate.getTime()+1e3*n);else if("M"===e.data("field")&&-1<(t=a.__("monthsOfYearShort").indexOf(e.val()))&&a.theDate.setMonth(t),""!==e.val()&&0===e.val().toString().search(/^[0-9]+$/))switch(e.data("field")){case"y":a.theDate.setD(0,i);break;case"m":a.theDate.setD(1,i-1);break;case"d":a.theDate.setD(2,i);break;case"h":a.theDate.setD(3,i);break;case"i":a.theDate.setD(4,i);break;case"s":a.theDate.setD(5,i)}setTimeout(function(){a.refresh()},150)}})}(jQuery),function(e){e(document).ready(function(){e("[data-role='datebox']").each(function(){e(this).datebox()})})}(jQuery);
//# sourceMappingURL=jtsage-datebox.min.js.map